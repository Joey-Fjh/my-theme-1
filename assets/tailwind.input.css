@import "tailwindcss";

/* base */

@layer base{
    @import "./base.css";    
}

/* theme variables */

@theme {
    --breakpoint-*: initial;
    --breakpoint-pc: 48rem; /* desktop */
    --breakpoint-fw: 80rem; /* full-width */
    
    --animate-icon-breathe: icon-breathe 0.9s ease-in-out infinite;
    @keyframes icon-breathe{
        0% {
            transform: translateY(0) scale(1) rotate(0deg);
            opacity: 1;
        }
        50% {
            transform: translateY(-2px) scale(1.08) rotate(1.5deg);
            opacity: 0.85;
        }
        100% {
            transform: translateY(0) scale(1) rotate(0deg);
            opacity: 1;
        }
    }
}

/* ============================= */
/* Components */
/* ============================= */

@layer components {
    /* Localization Switcher */
    .localization-switcher {
        @apply fonts-body surface;
        position: relative;
        display: inline-block;
        
        .localization-toggle {
            @apply px-4 py-2 flex items-center gap-1 cursor-pointer;
        }
        
        .localization-menu {
            @apply surface absolute z-10 mt-1 overflow-hidden;
            top: 100%;
            left: 0;
            
            .localization-item {
                @apply first:border-t-0 border-t;
                
                .localization-link {
                    @apply px-4 py-3 whitespace-nowrap cursor-pointer;
                    display: flex;
                    justify-content: flex-end;
                    align-items: center;
                    gap: 0.5rem;
                }
            }
        }
    }
    
    /* Dropdown */
    .dropdown {
        position: relative;
        
        .dropdown-trigger{
            cursor: pointer;
            list-style: none;
        }
        
        .dropdown-panel {
            position: absolute;
            z-index: 20;
            
            min-width: max-content;
            
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            
            transform: translateY(-12px) scale(0.98);
            
            transition:
            opacity 0.25s ease,
            transform 0.25s cubic-bezier(.22,1,.36,1),
            visibility 0s linear 0.25s;
        }
        
        .dropdown-open {
            /* details open */
            details[open] > & {
                opacity: 1;
                visibility: visible;
                pointer-events: auto;
                transform: translateY(0) scale(1);
                transition-delay: 0s;
            }
            
            /* hover (desktop only) */
            @media (hover: hover) and (pointer: fine) {
                details.dropdown:hover > & {
                    opacity: 1;
                    visibility: visible;
                    pointer-events: auto;
                    transform: translateY(0) scale(1);
                    transition-delay: 0s;
                }
            }
            
            /* aria / js control */
            [aria-expanded="true"] > &,
            .is-open > & {
                opacity: 1;
                visibility: visible;
                pointer-events: auto;
                transform: translateY(0) scale(1);
                transition-delay: 0s;
            }
        }
        
        .dropdown-icon {
            display: inline-block;
            align-items: center;
            justify-content: center;
            
            transition:
            transform 0.24s cubic-bezier(.22,1,.36,1),
            opacity 0.24s ease;
        }
        
        .dropdown-icon--down{
            transform: rotate(0deg);
        }
        
        &[open] > summary .dropdown-icon--down {
            transform: rotate(180deg);
        }

        .dropdown-icon--tilt{
            transform: rotate(-135deg);
        }

        &[open] > summary .dropdown-icon--tilt {
            transform: rotate(-135deg) translateY(2px);
        }
    }

    /* Tab Control */
    .tab-control-default{
        position: relative;
        display: flex;
        flex-direction: column;
        gap: 48px;
        align-items: center;

        .tab-header-default{
            display: flex;
            flex-wrap: nowrap;
            white-space: nowrap;  
            gap: 64px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .tab-content-default{
            width: 100%;
            overflow: hidden;

            .tab-enter {
                transition: all 200ms ease-out;
            }
            .tab-enter-start {
                opacity: 0;
                transform: translateY(6px);
            }
            .tab-enter-end {
                opacity: 1;
                transform: translateY(0);
            }   
            .tab-leave {
                transition: all 150ms ease-in;
            }
            .tab-leave-start {
                opacity: 1;
            }
            .tab-leave-end {
                opacity: 0;
            }
        }
    }
}

/* ============================= */
/* Utilities â€“ Atomic */
/* ============================= */

@utility container-page {
    @apply relative grid w-full;
    
    grid-template-columns: 
    minmax(var(--page-margin),1fr)
    minmax(0 , var(--page-width))
    minmax(var(--page-margin),1fr);
    
    & > * {
        @apply col-2;
    }
}

@utility surface{
    color: var(--color-foreground);
    background: rgb(var(--color-background));
    background: var(--gradient-background);
}

@utility icons{
    color: var(--color-icons);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: 
    transform 0.25s cubic-bezier(.4,0,.2,1),
    opacity 0.25s cubic-bezier(.4,0,.2,1); 
}

@utility icons-animate-*{
    will-change: transform, opacity;
    
    &:hover{
        animation: --value(--animate-icon-*);
        animation-delay: calc(var(--i,0) * 60ms);
    }
}

@utility links{
    @apply inline-flex w-fit items-center cursor-pointer no-underline transition-colors duration-300 
    focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-current;

    color: var(--color-links);
    position: relative;
}

@utility links-default {
    &::after{
        content:"";
        position: absolute;
        left: 0;
        bottom: -2px;
        width: 100%;
        height: 2px;
        background-color: currentColor;
        transition: transform 0.3s ease;
    }

    &:focus-visible::after,
    &:hover::after{
        transform: translateY(-2px);
    }
}

@utility links-underline{
    &::after{
        content:"";
        position: absolute;
        left: 0;
        bottom: -2px;
        width: 100%;
        height: 2px;
        background-color: currentColor;
        transform: scaleX(0);
        transform-origin: center;
        transition: transform 0.3s ease;
    }
    
    &:focus-visible::after,
    &:hover::after{
       transform: scaleX(1);
    }
}

@utility fonts-header{
    font-family: var(--font-heading-family);
    font-style: var(--font-heading-style);
    font-weight: var(--font-heading-weight);
}

@utility fonts-body{
    font-family: var(--font-body-family);
    font-style: var(--font-body-style);
    font-weight: var(--font-body-weight);
}

@utility primary-button{
    @apply px-4 py-2 cursor-pointer focus:outline-none focus:ring-2 focus:ring-offset-2;
    @apply fonts-body;
    color: var(--color-primary-button-text);
    background-color: var(--color-primary-button);
    border-color: var(--color-primary-button-border);
}

@utility secondary-button{ 
    @apply px-4 py-2 cursor-pointer focus:outline-none focus:ring-2 focus:ring-offset-2;
    @apply fonts-body;
    color: var(--color-secondary-button-text);
    background-color: var(--color-secondary-button);
    border-color: var(--color-secondary-button-border);
}

@utility sup-badge{
    @apply 
    text-xl
    align-super
    ml-1
    leading-none;
}

@layer utilities {
  /* Top Row */
  .place-top-left     { @apply col-start-1 row-start-1 justify-self-start self-start; }
  .place-top-center   { @apply col-start-2 row-start-1 justify-self-center self-start; }
  .place-top-right    { @apply col-start-3 row-start-1 justify-self-end self-start; }

  /* Middle Row */
  .place-center-left  { @apply col-start-1 row-start-2 justify-self-start self-center; }
  .place-center       { @apply col-start-2 row-start-2 justify-self-center self-center; }
  .place-center-right { @apply col-start-3 row-start-2 justify-self-end self-center; }

  /* Bottom Row */
  .place-bottom-left  { @apply col-start-1 row-start-3 justify-self-start self-end; }
  .place-bottom-center{ @apply col-start-2 row-start-3 justify-self-center self-end; }
  .place-bottom-right { @apply col-start-3 row-start-3 justify-self-end self-end; }
}
