{% doc %}
    Renders a product card item used in product grids and sliders.

    @param {product} product - The product object to render in the card
    @param {string} [class] - Optional extra CSS class names applied to the card
    @param {string} [image_ratio] - Optional image ratio or class used to control image aspect ratio

    @example
    {% render 'product-card', product: product, class: 'my-product-card' %}
{% enddoc %}

<div
    class="{{ class }} relative p-4 bg-white"
    x-data="{ hover: false }"
    x-on:mouseenter="hover = true"
    x-on:mouseleave="hover = false"
>
    <!-- Category & Settings -->
    <div class="mb-2 flex items-center justify-between">
        {% comment %} 预留分类信息 {% endcomment %}
        {% comment %} 预留轮播按钮 {% endcomment %}
    </div>

    <!-- Product Image Container -->
    <div class="relative mb-4 aspect-square">
        <!-- Product Image -->
        {%- capture sizes -%}
            (min-width: 48rem) calc(100vw / pc_items), calc(100vw / mobile_items)
        {%- endcapture -%}
            
        {%- capture widths -%}
            200,320,480,640,800
        {%- endcapture -%}

        {%- render 'image',
            image: product.featured_image,
            url: product.url,
            alt: product.featured_image.alt | default: product.title,
            width: product.featured_image.width,
            sizes: sizes,
            widths: widths,
            aspect_ratio: image_ratio
        -%}

        <!-- Hover Actions -->
        <div
            class="absolute m-6 inset-x-0 bottom-0 flex flex-col gap-2 transition-opacity duration-300"
            :class="hover ? 'opacity-100' : 'opacity-0'"
        >
            <button 
                class="w-full border border-gray-300 bg-white py-2 text-2xl text-gray-800 transition-colors hover:bg-gray-50"
                data-product-handle="{{ product.handle }}"
            >
                Quick View
            </button>
            <button 
                class="w-full bg-[#4a5d23] py-2 text-2xl text-white transition-colors hover:bg-[#3d4d1c]"
                data-variant-id="{{ product.selected_or_first_available_variant.id }}"
            >
                Add to Cart
            </button>
        </div>
    </div>

    <!-- Product Info -->
    <div class="flex items-center justify-between">
        <a href="{{ product.url }}" class="text-2xl font-medium text-gray-800 hover:underline">
            {{ product.title }}
        </a>
        <span class="text-2xl font-medium text-gray-800">{{ product.price | money }}</span>
    </div>
</div>
    
